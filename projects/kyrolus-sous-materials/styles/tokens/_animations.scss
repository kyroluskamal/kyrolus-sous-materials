// =============================================================================
// KYROLUS SOUS MATERIALS - ANIMATION & TRANSITION SYSTEM
// =============================================================================
// Advanced animation and transition utilities for modern, fluid interactions.
// Includes keyframe animations, transitions, transforms, and motion effects.
// =============================================================================

@use "sass:map";
@use "primitives" as *;

// =============================================================================
// KEYFRAME ANIMATIONS
// =============================================================================

// Spin
@keyframes ks-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// Ping (radar effect)
@keyframes ks-ping {
  75%,
  100% {
    transform: scale(2);
    opacity: 0;
  }
}

// Pulse
@keyframes ks-pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

// Bounce
@keyframes ks-bounce {
  0%,
  100% {
    transform: translateY(-25%);
    animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
  }
  50% {
    transform: translateY(0);
    animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
  }
}

// Shake
@keyframes ks-shake {
  0%,
  100% {
    transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translateX(-4px);
  }
  20%,
  40%,
  60%,
  80% {
    transform: translateX(4px);
  }
}

// Wiggle
@keyframes ks-wiggle {
  0%,
  100% {
    transform: rotate(-3deg);
  }
  50% {
    transform: rotate(3deg);
  }
}

// Fade In
@keyframes ks-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

// Fade Out
@keyframes ks-fade-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

// Fade In Up
@keyframes ks-fade-in-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// Fade In Down
@keyframes ks-fade-in-down {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// Fade In Left
@keyframes ks-fade-in-left {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

// Fade In Right
@keyframes ks-fade-in-right {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

// Slide In Up
@keyframes ks-slide-in-up {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

// Slide In Down
@keyframes ks-slide-in-down {
  from {
    transform: translateY(-100%);
  }
  to {
    transform: translateY(0);
  }
}

// Slide In Left
@keyframes ks-slide-in-left {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(0);
  }
}

// Slide In Right
@keyframes ks-slide-in-right {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

// Slide Out Up
@keyframes ks-slide-out-up {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(-100%);
  }
}

// Slide Out Down
@keyframes ks-slide-out-down {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(100%);
  }
}

// Zoom In
@keyframes ks-zoom-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

// Zoom Out
@keyframes ks-zoom-out {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}

// Scale Up
@keyframes ks-scale-up {
  from {
    transform: scale(0);
  }
  to {
    transform: scale(1);
  }
}

// Scale Down
@keyframes ks-scale-down {
  from {
    transform: scale(1);
  }
  to {
    transform: scale(0);
  }
}

// Flip Horizontal
@keyframes ks-flip-x {
  0% {
    transform: perspective(400px) rotateY(0);
  }
  100% {
    transform: perspective(400px) rotateY(360deg);
  }
}

// Flip Vertical
@keyframes ks-flip-y {
  0% {
    transform: perspective(400px) rotateX(0);
  }
  100% {
    transform: perspective(400px) rotateX(360deg);
  }
}

// Heartbeat
@keyframes ks-heartbeat {
  0% {
    transform: scale(1);
  }
  14% {
    transform: scale(1.1);
  }
  28% {
    transform: scale(1);
  }
  42% {
    transform: scale(1.1);
  }
  70% {
    transform: scale(1);
  }
}

// Float
@keyframes ks-float {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

// Swing
@keyframes ks-swing {
  20% {
    transform: rotate3d(0, 0, 1, 15deg);
  }
  40% {
    transform: rotate3d(0, 0, 1, -10deg);
  }
  60% {
    transform: rotate3d(0, 0, 1, 5deg);
  }
  80% {
    transform: rotate3d(0, 0, 1, -5deg);
  }
  100% {
    transform: rotate3d(0, 0, 1, 0deg);
  }
}

// Jello
@keyframes ks-jello {
  0%,
  11.1%,
  100% {
    transform: none;
  }
  22.2% {
    transform: skewX(-12.5deg) skewY(-12.5deg);
  }
  33.3% {
    transform: skewX(6.25deg) skewY(6.25deg);
  }
  44.4% {
    transform: skewX(-3.125deg) skewY(-3.125deg);
  }
  55.5% {
    transform: skewX(1.5625deg) skewY(1.5625deg);
  }
  66.6% {
    transform: skewX(-0.78125deg) skewY(-0.78125deg);
  }
  77.7% {
    transform: skewX(0.390625deg) skewY(0.390625deg);
  }
  88.8% {
    transform: skewX(-0.1953125deg) skewY(-0.1953125deg);
  }
}

// Rubber Band
@keyframes ks-rubber-band {
  0% {
    transform: scale3d(1, 1, 1);
  }
  30% {
    transform: scale3d(1.25, 0.75, 1);
  }
  40% {
    transform: scale3d(0.75, 1.25, 1);
  }
  50% {
    transform: scale3d(1.15, 0.85, 1);
  }
  65% {
    transform: scale3d(0.95, 1.05, 1);
  }
  75% {
    transform: scale3d(1.05, 0.95, 1);
  }
  100% {
    transform: scale3d(1, 1, 1);
  }
}

// Ripple
@keyframes ks-ripple {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

// Shimmer (for skeleton loading)
@keyframes ks-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

// Blink
@keyframes ks-blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}

// =============================================================================
// ANIMATION UTILITY CLASSES
// =============================================================================

// Base animations
.animate-none {
  animation: none;
}
.animate-spin {
  animation: ks-spin 1s linear infinite;
}
.animate-ping {
  animation: ks-ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;
}
.animate-pulse {
  animation: ks-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}
.animate-bounce {
  animation: ks-bounce 1s infinite;
}
.animate-shake {
  animation: ks-shake 0.5s ease-in-out;
}
.animate-wiggle {
  animation: ks-wiggle 1s ease-in-out infinite;
}

// Fade animations
.animate-fade-in {
  animation: ks-fade-in 0.3s ease-out forwards;
}
.animate-fade-out {
  animation: ks-fade-out 0.3s ease-out forwards;
}
.animate-fade-in-up {
  animation: ks-fade-in-up 0.3s ease-out forwards;
}
.animate-fade-in-down {
  animation: ks-fade-in-down 0.3s ease-out forwards;
}
.animate-fade-in-left {
  animation: ks-fade-in-left 0.3s ease-out forwards;
}
.animate-fade-in-right {
  animation: ks-fade-in-right 0.3s ease-out forwards;
}

// Slide animations
.animate-slide-in-up {
  animation: ks-slide-in-up 0.3s ease-out forwards;
}
.animate-slide-in-down {
  animation: ks-slide-in-down 0.3s ease-out forwards;
}
.animate-slide-in-left {
  animation: ks-slide-in-left 0.3s ease-out forwards;
}
.animate-slide-in-right {
  animation: ks-slide-in-right 0.3s ease-out forwards;
}
.animate-slide-out-up {
  animation: ks-slide-out-up 0.3s ease-out forwards;
}
.animate-slide-out-down {
  animation: ks-slide-out-down 0.3s ease-out forwards;
}

// Zoom animations
.animate-zoom-in {
  animation: ks-zoom-in 0.3s ease-out forwards;
}
.animate-zoom-out {
  animation: ks-zoom-out 0.3s ease-out forwards;
}
.animate-scale-up {
  animation: ks-scale-up 0.3s ease-out forwards;
}
.animate-scale-down {
  animation: ks-scale-down 0.3s ease-out forwards;
}

// 3D animations
.animate-flip-x {
  animation: ks-flip-x 0.6s ease-in-out;
}
.animate-flip-y {
  animation: ks-flip-y 0.6s ease-in-out;
}

// Fun animations
.animate-heartbeat {
  animation: ks-heartbeat 1.3s ease-in-out infinite;
}
.animate-float {
  animation: ks-float 3s ease-in-out infinite;
}
.animate-swing {
  animation: ks-swing 1s ease-in-out;
}
.animate-jello {
  animation: ks-jello 0.9s ease-in-out;
}
.animate-rubber-band {
  animation: ks-rubber-band 0.8s ease-in-out;
}

// Loading animations
.animate-shimmer {
  background: linear-gradient(
    90deg,
    var(--skeleton) 0%,
    var(--skeleton-shimmer) 50%,
    var(--skeleton) 100%
  );
  background-size: 200% 100%;
  animation: ks-shimmer 1.5s infinite;
}

.animate-blink {
  animation: ks-blink 1s step-end infinite;
}

// =============================================================================
// ANIMATION DURATION UTILITIES
// =============================================================================
@each $name, $value in $durations {
  .duration-#{$name} {
    animation-duration: $value;
  }
}

// =============================================================================
// ANIMATION DELAY UTILITIES
// =============================================================================
$animation-delays: (
  "0": 0ms,
  "75": 75ms,
  "100": 100ms,
  "150": 150ms,
  "200": 200ms,
  "300": 300ms,
  "500": 500ms,
  "700": 700ms,
  "1000": 1000ms,
);

@each $name, $value in $animation-delays {
  .delay-#{$name} {
    animation-delay: $value;
  }
}

// =============================================================================
// ANIMATION TIMING FUNCTION UTILITIES
// =============================================================================
@each $name, $value in $easings {
  .ease-#{$name} {
    animation-timing-function: $value;
  }
}

// =============================================================================
// ANIMATION ITERATION UTILITIES
// =============================================================================
.animate-once {
  animation-iteration-count: 1;
}
.animate-twice {
  animation-iteration-count: 2;
}
.animate-infinite {
  animation-iteration-count: infinite;
}

// =============================================================================
// ANIMATION DIRECTION UTILITIES
// =============================================================================
.animate-normal {
  animation-direction: normal;
}
.animate-reverse {
  animation-direction: reverse;
}
.animate-alternate {
  animation-direction: alternate;
}
.animate-alternate-reverse {
  animation-direction: alternate-reverse;
}

// =============================================================================
// ANIMATION FILL MODE UTILITIES
// =============================================================================
.animate-fill-none {
  animation-fill-mode: none;
}
.animate-fill-forwards {
  animation-fill-mode: forwards;
}
.animate-fill-backwards {
  animation-fill-mode: backwards;
}
.animate-fill-both {
  animation-fill-mode: both;
}

// =============================================================================
// ANIMATION PLAY STATE UTILITIES
// =============================================================================
.animate-running {
  animation-play-state: running;
}
.animate-paused {
  animation-play-state: paused;
}

// =============================================================================
// TRANSITION UTILITIES
// =============================================================================

// Transition property
.transition-none {
  transition-property: none;
}
.transition-all {
  transition-property: all;
}
.transition {
  transition-property: color, background-color, border-color,
    text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter,
    backdrop-filter;
  transition-timing-function: var(--ease-in-out);
  transition-duration: 150ms;
}
.transition-colors {
  transition-property: color, background-color, border-color,
    text-decoration-color, fill, stroke;
  transition-timing-function: var(--ease-in-out);
  transition-duration: 150ms;
}
.transition-opacity {
  transition-property: opacity;
  transition-timing-function: var(--ease-in-out);
  transition-duration: 150ms;
}
.transition-shadow {
  transition-property: box-shadow;
  transition-timing-function: var(--ease-in-out);
  transition-duration: 150ms;
}
.transition-transform {
  transition-property: transform;
  transition-timing-function: var(--ease-in-out);
  transition-duration: 150ms;
}

// Transition duration
@each $name, $value in $durations {
  .transition-duration-#{$name} {
    transition-duration: $value;
  }
}

// Transition timing function
@each $name, $value in $easings {
  .transition-#{$name} {
    transition-timing-function: $value;
  }
}

// Transition delay
@each $name, $value in $animation-delays {
  .transition-delay-#{$name} {
    transition-delay: $value;
  }
}

// =============================================================================
// TRANSFORM UTILITIES
// =============================================================================

// Transform origin
$transform-origins: (
  "center": center,
  "top": top,
  "top-right": top right,
  "right": right,
  "bottom-right": bottom right,
  "bottom": bottom,
  "bottom-left": bottom left,
  "left": left,
  "top-left": top left,
);

@each $name, $value in $transform-origins {
  .origin-#{$name} {
    transform-origin: $value;
  }
}

// Scale utilities
$scale-values: (
  "0": 0,
  "50": 0.5,
  "75": 0.75,
  "90": 0.9,
  "95": 0.95,
  "100": 1,
  "105": 1.05,
  "110": 1.1,
  "125": 1.25,
  "150": 1.5,
);

@each $name, $value in $scale-values {
  .scale-#{$name} {
    transform: scale($value);
  }
  .scale-x-#{$name} {
    transform: scaleX($value);
  }
  .scale-y-#{$name} {
    transform: scaleY($value);
  }

  .hover\:scale-#{$name}:hover {
    transform: scale($value);
  }
  .hover\:scale-x-#{$name}:hover {
    transform: scaleX($value);
  }
  .hover\:scale-y-#{$name}:hover {
    transform: scaleY($value);
  }
}

// Rotate utilities
$rotate-values: (
  "0": 0deg,
  "1": 1deg,
  "2": 2deg,
  "3": 3deg,
  "6": 6deg,
  "12": 12deg,
  "45": 45deg,
  "90": 90deg,
  "180": 180deg,
);

@each $name, $value in $rotate-values {
  .rotate-#{$name} {
    transform: rotate($value);
  }
  .-rotate-#{$name} {
    transform: rotate(-$value);
  }

  .hover\:rotate-#{$name}:hover {
    transform: rotate($value);
  }
  .hover\:-rotate-#{$name}:hover {
    transform: rotate(-$value);
  }
}

// Translate utilities
$translate-values: (
  "0": 0,
  "px": 1px,
  "0.5": 0.125rem,
  "1": 0.25rem,
  "1.5": 0.375rem,
  "2": 0.5rem,
  "2.5": 0.625rem,
  "3": 0.75rem,
  "3.5": 0.875rem,
  "4": 1rem,
  "5": 1.25rem,
  "6": 1.5rem,
  "7": 1.75rem,
  "8": 2rem,
  "9": 2.25rem,
  "10": 2.5rem,
  "11": 2.75rem,
  "12": 3rem,
  "14": 3.5rem,
  "16": 4rem,
  "20": 5rem,
  "24": 6rem,
  "28": 7rem,
  "32": 8rem,
  "36": 9rem,
  "40": 10rem,
  "44": 11rem,
  "48": 12rem,
  "52": 13rem,
  "56": 14rem,
  "60": 15rem,
  "64": 16rem,
  "72": 18rem,
  "80": 20rem,
  "96": 24rem,
  "1/2": 50%,
  "1/3": 33.333%,
  "2/3": 66.666%,
  "1/4": 25%,
  "2/4": 50%,
  "3/4": 75%,
  "full": 100%,
);

@each $name, $value in $translate-values {
  .translate-x-#{$name} {
    transform: translateX($value);
  }
  .translate-y-#{$name} {
    transform: translateY($value);
  }
  .-translate-x-#{$name} {
    transform: translateX(-$value);
  }
  .-translate-y-#{$name} {
    transform: translateY(-$value);
  }
}

// Skew utilities
$skew-values: (
  "0": 0deg,
  "1": 1deg,
  "2": 2deg,
  "3": 3deg,
  "6": 6deg,
  "12": 12deg,
);

@each $name, $value in $skew-values {
  .skew-x-#{$name} {
    transform: skewX($value);
  }
  .skew-y-#{$name} {
    transform: skewY($value);
  }
  .-skew-x-#{$name} {
    transform: skewX(-$value);
  }
  .-skew-y-#{$name} {
    transform: skewY(-$value);
  }
}

// =============================================================================
// SPECIAL EFFECTS
// =============================================================================

// Will-change (for performance optimization)
.will-change-auto {
  will-change: auto;
}
.will-change-scroll {
  will-change: scroll-position;
}
.will-change-contents {
  will-change: contents;
}
.will-change-transform {
  will-change: transform;
}
.will-change-opacity {
  will-change: opacity;
}

// GPU acceleration hint
.gpu-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
}

// Perspective
$perspectives: (
  "none": none,
  "sm": 250px,
  "": 500px,
  "md": 750px,
  "lg": 1000px,
  "xl": 1500px,
);

@each $name, $value in $perspectives {
  $class-name: if($name == "", "perspective", "perspective-#{$name}");
  .#{$class-name} {
    perspective: $value;
  }
}

// Preserve 3D
.preserve-3d {
  transform-style: preserve-3d;
}
.flat {
  transform-style: flat;
}

// Backface visibility
.backface-visible {
  backface-visibility: visible;
}
.backface-hidden {
  backface-visibility: hidden;
}

// =============================================================================
// HOVER & FOCUS ANIMATION HELPERS
// =============================================================================

// Lift effect on hover
.hover\:lift:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

// Scale on hover
.hover\:grow:hover {
  transform: scale(1.05);
}

// Sink on active
.active\:sink:active {
  transform: translateY(2px);
}

// Focus ring animation
.focus\:ring-animated:focus {
  animation: ks-pulse 1s ease-in-out infinite;
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

// =============================================================================
// MOTION PREFERENCE SUPPORT
// =============================================================================
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

// Utility to force reduced motion
.motion-reduce {
  animation: none !important;
  transition: none !important;
}

// Utility to enable motion
.motion-safe {
  // Only apply animations when motion is not reduced
  @media (prefers-reduced-motion: no-preference) {
    animation-play-state: running;
    transition-duration: inherit;
  }
}

// =============================================================================
// SCROLL BEHAVIOR UTILITIES
// =============================================================================
.scroll-auto {
  scroll-behavior: auto;
}
.scroll-smooth {
  scroll-behavior: smooth;
}

// =============================================================================
// RESPONSIVE ANIMATION UTILITIES
// =============================================================================
@each $bp-name, $bp-value in $breakpoints {
  @if $bp-value > 0 {
    @media (min-width: $bp-value) {
      .#{$bp-name}\:animate-none {
        animation: none;
      }
      .#{$bp-name}\:animate-spin {
        animation: ks-spin 1s linear infinite;
      }
      .#{$bp-name}\:animate-pulse {
        animation: ks-pulse 2s ease-in-out infinite;
      }
      .#{$bp-name}\:animate-bounce {
        animation: ks-bounce 1s infinite;
      }

      @each $name, $value in $durations {
        .#{$bp-name}\:duration-#{$name} {
          animation-duration: $value;
        }
        .#{$bp-name}\:transition-duration-#{$name} {
          transition-duration: $value;
        }
      }
    }
  }
}
