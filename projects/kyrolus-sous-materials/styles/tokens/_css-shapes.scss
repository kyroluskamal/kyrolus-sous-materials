// =============================================================================
// CSS SHAPES
// =============================================================================
// Text wrapping around shapes using shape-outside
// Create magazine-style layouts with text flowing around images
// Browser support: All modern browsers

// =============================================================================
// SHAPE-OUTSIDE BASIC SHAPES
// =============================================================================

/// Circle shape - text wraps around a circle
.shape-circle {
  float: left;
  shape-outside: circle(50%);
  clip-path: circle(50%);
  width: var(--shape-size, 200px);
  height: var(--shape-size, 200px);
}

.shape-circle-right {
  float: right;
  shape-outside: circle(50%);
  clip-path: circle(50%);
  width: var(--shape-size, 200px);
  height: var(--shape-size, 200px);
}

/// Ellipse shape
.shape-ellipse {
  float: left;
  shape-outside: ellipse(40% 50% at 50% 50%);
  clip-path: ellipse(40% 50% at 50% 50%);
  width: var(--shape-size, 200px);
  height: var(--shape-size, 250px);
}

.shape-ellipse-right {
  float: right;
  shape-outside: ellipse(40% 50% at 50% 50%);
  clip-path: ellipse(40% 50% at 50% 50%);
  width: var(--shape-size, 200px);
  height: var(--shape-size, 250px);
}

/// Inset shape (rounded rectangle)
.shape-inset {
  float: left;
  shape-outside: inset(0 round 20px);
  width: var(--shape-size, 200px);
  height: var(--shape-size, 200px);
}

.shape-inset-rounded {
  float: left;
  shape-outside: inset(10px round 50%);
  clip-path: inset(10px round 50%);
  width: var(--shape-size, 200px);
  height: var(--shape-size, 200px);
}

// =============================================================================
// POLYGON SHAPES
// =============================================================================

/// Triangle pointing right
.shape-triangle-right {
  float: left;
  shape-outside: polygon(0 0, 100% 50%, 0 100%);
  clip-path: polygon(0 0, 100% 50%, 0 100%);
  width: var(--shape-size, 150px);
  height: var(--shape-size, 200px);
}

/// Triangle pointing left
.shape-triangle-left {
  float: right;
  shape-outside: polygon(100% 0, 0 50%, 100% 100%);
  clip-path: polygon(100% 0, 0 50%, 100% 100%);
  width: var(--shape-size, 150px);
  height: var(--shape-size, 200px);
}

/// Diamond shape
.shape-diamond {
  float: left;
  shape-outside: polygon(50% 0, 100% 50%, 50% 100%, 0 50%);
  clip-path: polygon(50% 0, 100% 50%, 50% 100%, 0 50%);
  width: var(--shape-size, 200px);
  height: var(--shape-size, 200px);
}

/// Pentagon
.shape-pentagon {
  float: left;
  shape-outside: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%);
  clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%);
  width: var(--shape-size, 200px);
  height: var(--shape-size, 200px);
}

/// Hexagon
.shape-hexagon {
  float: left;
  shape-outside: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
  clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
  width: var(--shape-size, 200px);
  height: var(--shape-size, 175px);
}

/// Octagon
.shape-octagon {
  float: left;
  shape-outside: polygon(
    30% 0%,
    70% 0%,
    100% 30%,
    100% 70%,
    70% 100%,
    30% 100%,
    0% 70%,
    0% 30%
  );
  clip-path: polygon(
    30% 0%,
    70% 0%,
    100% 30%,
    100% 70%,
    70% 100%,
    30% 100%,
    0% 70%,
    0% 30%
  );
  width: var(--shape-size, 200px);
  height: var(--shape-size, 200px);
}

/// Star shape
.shape-star {
  float: left;
  shape-outside: polygon(
    50% 0%,
    61% 35%,
    98% 35%,
    68% 57%,
    79% 91%,
    50% 70%,
    21% 91%,
    32% 57%,
    2% 35%,
    39% 35%
  );
  clip-path: polygon(
    50% 0%,
    61% 35%,
    98% 35%,
    68% 57%,
    79% 91%,
    50% 70%,
    21% 91%,
    32% 57%,
    2% 35%,
    39% 35%
  );
  width: var(--shape-size, 200px);
  height: var(--shape-size, 200px);
}

/// Heart shape
.shape-heart {
  float: left;
  shape-outside: polygon(
    50% 100%,
    0% 35%,
    0% 25%,
    25% 0%,
    50% 15%,
    75% 0%,
    100% 25%,
    100% 35%
  );
  clip-path: polygon(
    50% 100%,
    0% 35%,
    0% 25%,
    25% 0%,
    50% 15%,
    75% 0%,
    100% 25%,
    100% 35%
  );
  width: var(--shape-size, 200px);
  height: var(--shape-size, 200px);
}

/// Arrow pointing right
.shape-arrow-right {
  float: left;
  shape-outside: polygon(
    0 25%,
    60% 25%,
    60% 0,
    100% 50%,
    60% 100%,
    60% 75%,
    0 75%
  );
  clip-path: polygon(0 25%, 60% 25%, 60% 0, 100% 50%, 60% 100%, 60% 75%, 0 75%);
  width: var(--shape-size, 200px);
  height: var(--shape-size, 100px);
}

/// Chevron
.shape-chevron {
  float: left;
  shape-outside: polygon(0 0, 50% 50%, 0 100%, 25% 100%, 75% 50%, 25% 0);
  clip-path: polygon(0 0, 50% 50%, 0 100%, 25% 100%, 75% 50%, 25% 0);
  width: var(--shape-size, 150px);
  height: var(--shape-size, 200px);
}

// =============================================================================
// CURVED SHAPES (using path())
// =============================================================================

/// Blob shape 1
.shape-blob-1 {
  float: left;
  shape-outside: polygon(
    60% 5%,
    80% 20%,
    95% 45%,
    85% 75%,
    60% 95%,
    30% 85%,
    10% 55%,
    20% 25%
  );
  clip-path: polygon(
    60% 5%,
    80% 20%,
    95% 45%,
    85% 75%,
    60% 95%,
    30% 85%,
    10% 55%,
    20% 25%
  );
  width: var(--shape-size, 200px);
  height: var(--shape-size, 200px);
}

/// Blob shape 2
.shape-blob-2 {
  float: left;
  shape-outside: polygon(
    50% 0%,
    80% 10%,
    100% 35%,
    95% 65%,
    75% 90%,
    40% 100%,
    10% 80%,
    0% 45%,
    15% 15%
  );
  clip-path: polygon(
    50% 0%,
    80% 10%,
    100% 35%,
    95% 65%,
    75% 90%,
    40% 100%,
    10% 80%,
    0% 45%,
    15% 15%
  );
  width: var(--shape-size, 200px);
  height: var(--shape-size, 200px);
}

/// Wave shape (for sidebar text wrap)
.shape-wave {
  float: left;
  shape-outside: polygon(
    0 0,
    100% 0,
    100% 20%,
    80% 30%,
    100% 40%,
    80% 50%,
    100% 60%,
    80% 70%,
    100% 80%,
    100% 100%,
    0 100%
  );
  width: var(--shape-size, 100px);
  height: 100%;
}

// =============================================================================
// SHAPE-MARGIN
// =============================================================================

.shape-margin-0 {
  shape-margin: 0;
}

.shape-margin-1 {
  shape-margin: 0.25rem;
}

.shape-margin-2 {
  shape-margin: 0.5rem;
}

.shape-margin-3 {
  shape-margin: 0.75rem;
}

.shape-margin-4 {
  shape-margin: 1rem;
}

.shape-margin-5 {
  shape-margin: 1.25rem;
}

.shape-margin-6 {
  shape-margin: 1.5rem;
}

.shape-margin-8 {
  shape-margin: 2rem;
}

.shape-margin-10 {
  shape-margin: 2.5rem;
}

// =============================================================================
// SHAPE-IMAGE-THRESHOLD
// =============================================================================
// Controls how transparent pixels in an image affect shape-outside

.shape-threshold-0 {
  shape-image-threshold: 0;
}

.shape-threshold-25 {
  shape-image-threshold: 0.25;
}

.shape-threshold-50 {
  shape-image-threshold: 0.5;
}

.shape-threshold-75 {
  shape-image-threshold: 0.75;
}

.shape-threshold-100 {
  shape-image-threshold: 1;
}

// =============================================================================
// SHAPE FROM IMAGE
// =============================================================================

/// Shape from element's own image (for transparent PNGs)
.shape-from-image {
  float: left;
  shape-outside: url(var(--shape-image));
  shape-margin: var(--shape-margin, 1rem);
  shape-image-threshold: var(--shape-threshold, 0.5);
}

/// Shape from CSS gradient
.shape-gradient-fade {
  float: left;
  shape-outside: linear-gradient(to right, transparent, black);
  width: var(--shape-size, 200px);
  height: var(--shape-size, 300px);
}

// =============================================================================
// SHAPE SIZES
// =============================================================================

.shape-xs {
  --shape-size: 80px;
}

.shape-sm {
  --shape-size: 120px;
}

.shape-md {
  --shape-size: 200px;
}

.shape-lg {
  --shape-size: 300px;
}

.shape-xl {
  --shape-size: 400px;
}

// =============================================================================
// MAGAZINE LAYOUT PATTERNS
// =============================================================================

/// Drop cap with shape
.drop-cap-shaped {
  float: left;
  font-size: 4rem;
  line-height: 1;
  font-weight: 700;
  padding-right: 0.5rem;
  shape-outside: margin-box;
  shape-margin: 0.25rem;
}

/// Pull quote with shape
.pull-quote-shaped {
  float: right;
  width: 40%;
  padding: 1.5rem;
  margin: 0 0 1rem 1.5rem;
  font-size: 1.25rem;
  font-style: italic;
  border-left: 4px solid var(--primary);
  shape-outside: margin-box;
  shape-margin: 1rem;
}

/// Sidebar callout
.callout-shaped {
  float: left;
  width: 35%;
  padding: 1rem;
  margin: 0 1.5rem 1rem 0;
  background: var(--surface-elevated);
  border-radius: var(--radius-lg);
  shape-outside: margin-box;
  shape-margin: 1rem;
}

// =============================================================================
// CLEARFIX FOR FLOATED SHAPES
// =============================================================================

.shape-container::after {
  content: "";
  display: table;
  clear: both;
}

.clear-shape {
  clear: both;
}

.clear-left {
  clear: left;
}

.clear-right {
  clear: right;
}

// =============================================================================
// RESPONSIVE SHAPES
// =============================================================================

/// Disable shape on small screens
@media (max-width: 640px) {
  .shape-responsive {
    float: none !important;
    shape-outside: none !important;
    clip-path: none !important;
    width: 100% !important;
    height: auto !important;
    margin: 1rem 0 !important;
  }
}

/// Shape only on large screens
.shape-lg-only {
  @media (max-width: 1024px) {
    float: none !important;
    shape-outside: none !important;
    clip-path: none !important;
    width: 100% !important;
    height: auto !important;
  }
}

// =============================================================================
// ANIMATED SHAPES (Experimental)
// =============================================================================

/// Morphing shape animation
@keyframes shape-morph {
  0%,
  100% {
    clip-path: circle(50% at 50% 50%);
  }
  25% {
    clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
  }
  50% {
    clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
  }
  75% {
    clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%);
  }
}

.shape-morph {
  animation: shape-morph 8s ease-in-out infinite;
}

/// Pulsing shape
@keyframes shape-pulse {
  0%,
  100% {
    clip-path: circle(45% at 50% 50%);
  }
  50% {
    clip-path: circle(50% at 50% 50%);
  }
}

.shape-pulse {
  animation: shape-pulse 2s ease-in-out infinite;
}

// =============================================================================
// FLOAT UTILITIES FOR SHAPES
// =============================================================================

.float-shape-left {
  float: left;
  shape-outside: var(--shape, margin-box);
  shape-margin: var(--shape-margin, 1rem);
}

.float-shape-right {
  float: right;
  shape-outside: var(--shape, margin-box);
  shape-margin: var(--shape-margin, 1rem);
}

// =============================================================================
// MIXINS
// =============================================================================

/// Create custom polygon shape
/// @param {List} $points - Polygon points
/// @param {String} $float - Float direction
@mixin custom-shape($points, $float: left) {
  float: $float;
  shape-outside: polygon($points);
  clip-path: polygon($points);
}

/// Shape from circle
/// @param {Percentage} $radius - Circle radius
/// @param {String} $float - Float direction
@mixin circle-shape($radius: 50%, $float: left) {
  float: $float;
  shape-outside: circle($radius);
  clip-path: circle($radius);
}

// =============================================================================
// REDUCED MOTION
// =============================================================================

@media (prefers-reduced-motion: reduce) {
  .shape-morph,
  .shape-pulse {
    animation: none !important;
  }
}

// =============================================================================
// PRINT STYLES
// =============================================================================

@media print {
  [class*="shape-"] {
    float: none !important;
    shape-outside: none !important;
    clip-path: none !important;
    width: auto !important;
    height: auto !important;
  }
}
